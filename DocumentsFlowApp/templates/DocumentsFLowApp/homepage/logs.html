<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>Logs</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <script>


            function getCookie(c_name) {
                if (document.cookie.length > 0)
                {
                    c_start = document.cookie.indexOf(c_name + "=");
                    if (c_start != -1)
                    {
                        c_start = c_start + c_name.length + 1;
                        c_end = document.cookie.indexOf(";", c_start);
                        if (c_end == -1) c_end = document.cookie.length;
                        return unescape(document.cookie.substring(c_start,c_end));
                    }
                }
                return "";
            }
            function makeDocumentStatusFinal(path){
                $.ajaxSetup({
                    headers: { "X-CSRFToken": getCookie("csrftoken") }
                });
                console.log(path)

                $.ajax({

                    url: '/docflow/change_document_status_to_final/',
                    method: 'POST', // or another (GET), whatever you need
                    data: {
                        document_path: path
                    },
                    success: function (data) {
                        // success callback
                        // you can process data returned by function from views.py
                    }
                })
            }
            function makeDocumentStatusDraft(path){
                $.ajaxSetup({
                    headers: { "X-CSRFToken": getCookie("csrftoken") }
                });
                console.log(path)

                $.ajax({

                    url: '/docflow/change_document_status_to_draft/',
                    method: 'POST', // or another (GET), whatever you need
                    data: {
                        document_path: path
                    },
                    success: function (data) {
                        // success callback
                        // you can process data returned by function from views.py
                    }
                })
            }

            function deleteDraft(path){
                $.ajaxSetup({
                    headers: { "X-CSRFToken": getCookie("csrftoken") }
                });
                console.log(path)

                $.ajax({

                    url: '/docflow/delete_draft/',
                    method: 'POST', // or another (GET), whatever you need
                    data: {
                        document_path: path
                    },
                    success: function (data) {
                        location.reload();
                    }
                })
            }

            function downloadFile(path){
                $.ajaxSetup({
                    headers: { "X-CSRFToken": getCookie("csrftoken") }
                });
                console.log(path)

                $.ajax({

                    url: '/docflow/download/',
                    method: 'POST', // or another (GET), whatever you need
                    data: {
                        document_path: path
                    },
                    success: function (data) {
                        // success callback
                        // you can process data returned by function from views.py
                    }
                })
            }


    </script>
    <style>

        html, body , #page{
            height: 100%;
            width: 100%;
            margin:0px;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: #565656; /* For browsers that do not support gradients */
            background: -webkit-linear-gradient(#565656, #c09f80,#76323f); /* For Safari 5.1 to 6.0 */
            background: -o-linear-gradient(#565656, #c09f80,#76323f); /* For Opera 11.1 to 12.0 */
            background: -moz-linear-gradient( #565656, #c09f80,#76323f); /* For Firefox 3.6 to 15 */
            background: linear-gradient(#565656, #c09f80,#76323f); /* Standard syntax */
        }

        .menuLink {
            margin-top: 7px;
            margin-bottom: 3px;
            font-family: 'Open Sans', sans-serif;
            color: white;
            font-size: 18px;
            float: left;

            margin-right: 10px;
            padding: 5px;
            border: 1px solid #ccc;
            background-color: #619fda;
            -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;

        }

        :visited {
            color: white;
            text-decoration: none;
        }

        a{
            text-decoration: none;
            color: white;

        }

        .bar{
            width: 100%;
            height: 50px;
            border-bottom:solid #d7cec7;
        }

        #log{
            float: right;

            margin-top: 3px;
            margin-bottom: 3px;
            font-family: 'Open Sans', sans-serif;
            color: white;
            font-size: 20px;

            margin-right: 15px;
            padding: 10px;
        }

        #hp {
            float: left;
            margin-top: 6px;
            margin-right: 7px;
        }




        {# dropdown #}

        select{
            font-family: 'Open Sans', sans-serif;
            color: white;
            font-size: 18px;

            margin-right: 15px;
            padding: 5px;
            border: 1px solid #ccc;
            background-color: #619fda;
            -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;

        }


    </style>

</head>
<body>
<div id="page">
    <div class="bar">
        <div id="hp"><a href="/docflow/homepage?user=True"><img src="https://scontent-vie1-1.xx.fbcdn.net/v/t34.0-12/16176924_1368786129860644_839327671_n.png?oh=2549e8b2a9df5c41476ca4c0b999b514&oe=5885930D" style="width:105px;height:40px;"></a></div>


        {% if user.is_authenticated %}
            {% if user.is_admin %}
                    <div class="menuLink"><a href="/docflow/zona_de_lucru">Work Zone</a></div>
                    <div class="menuLink"><a href="/docflow/zona_taskuri_initiate">Initiated Tasks</a></div>
                    <div class="menuLink"><a href="/docflow/zona_taskuri">Tasks Zone</a></div>
                    <div class="menuLink"><a href="/docflow/zona_taskuri_terminate">Finished Tasks</a></div>
                    <div class="menuLink"><a href="/docflow/uploadFile">Upload file</a></div>
                    <div class="menuLink"><a href="/docflow/createFile">Create File</a></div>
                    <div class="menuLink"><a href="/docflow/processes">Create Process</a></div>
                    <div class="menuLink"><a href="/docflow/logs">Logs</a></div>
                    <div class="menuLink"><a href="/docflow/createFlux">Create Flux</a></div>
            {% endif %}
        {% endif %}

        {% if user.is_authenticated %}
            {% if user.is_contributor or user.is_manager %}
                    <div class="menuLink"><a href="/docflow/zona_de_lucru">Work Zone</a></div>
                    <div class="menuLink"><a href="/docflow/zona_taskuri_initiate">Initiated Tasks</a></div>
                    <div class="menuLink"><a href="/docflow/zona_taskuri">Tasks Zone</a></div>
                    <div class="menuLink"><a href="/docflow/zona_taskuri_terminate">Finished Tasks</a></div>
                    <div class="menuLink"><a href="/docflow/uploadFile">Upload file</a></div>
                    <div class="menuLink"><a href="/docflow/createFile">Create File</a></div>
                    <div class="menuLink"><a href="/docflow/processes">Create Process</a></div>
            {% endif %}
        {% endif %}

        {% if user.is_authenticated %}
            {% if user.is_reader %}
                    <div class="menuLink"><a href="/docflow/zona_taskuri_terminate">Finished Tasks</a></div>
            {% endif %}
        {% endif %}

        <div id="log"><a href="/docflow/logout/">Log Out</a></div>
    </div>

    <div id="pageContent" style="padding: 10px;">
    <br><br>

        <h2 style="text-align: center;color: white;margin-top: -10px;font-family: 'Open Sans', sans-serif;color: white;font-size: 24px;">Logs</h2>

        <form action="/docflow/filter/" method="get">
                <select name="column" style="margin-left: 870px;width: 230px;margin-bottom: 20px;">
                    <option name="column">User</option>
                    <option name="column">Filter by</option>
                    <option name="column">Document Name</option>
                    <option name="column">Path</option>
                    <option name="column">Date</option>
                </select>
                <label for="value" style="width: 135px;color: white;font-size: 18px;margin-top:0;">Value:</label>
                <input id="id_title" maxlength="100" name="value" type="text" required style="width: 100px;height: 25px;font-size: 16px;"/>
                <button style="margin-top:5px;font-family: 'Open Sans', sans-serif;color: white;font-size: 18px;float: right;border: 1px solid #ccc;background-color: #619fda;-webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;" type="submit">Filter</button>



        </form>

        <table style="width:100%;table-layout: fixed;border-collapse: collapse;margin-top: 30px;">
            <tr style="">
                <th style="border: 1px solid black;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">User</th>
                <th style="border: 1px solid black;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">Action</th>
                <th style="border: 1px solid black;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">Document Name</th>
                <th style="border: 1px solid black;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">Path</th>
                <th style="border: 1px solid black;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">Date</th>
             </tr>
        </table>

        {% for doc in docs %}

        <table style="width:100%;table-layout: fixed;border-collapse: collapse;color:white;">

            <tr>
                <td style="border: 1px solid black;">userrr</td>
                <td style="border: 1px solid black;text-align: center;">actionnn</td>
                <td style="border: 1px solid black;text-align: center;">documnettnamee</td>
                <td style="border: 1px solid black;text-align: center;">pathhhh</td>
                <td style="border: 1px solid black;text-align: center;">dateeee</td>
              </tr>
            </table>
            <br>

        {% endfor %}


        <div class="articleContent">

	    </div>


    </div>

</div>
</body>
</html>
