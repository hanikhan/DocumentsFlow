{% extends 'homepage2.html' %}
{% block title %}Work Zone{% endblock %}

{% block content %}
    <h2 style="text-align: center;color: white;font-family: 'Open Sans', sans-serif;color: white;font-size: 24px;">Work Zone</h2>

    <table style="width:100%;table-layout: fixed;border-collapse: collapse;">
        <tr style="">
            <th style="border: 1px solid black;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">Name</th>
            <th style="border: 1px solid black;width: 100px;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">Version</th>
            <th style="border: 1px solid black;width: 100px;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">Owner</th>
            <th style="border: 1px solid black;font-family: 'Open Sans', sans-serif;color: white;font-size: 20px;border: 1px solid #ccc;background-color: #619fda;">Options</th>
         </tr>
    </table>

  {% for doc in docs %}

    <table style="width:100%;table-layout: fixed;border-collapse: collapse;color:white;">

        <tr>
            <td style="border: 1px solid black;">{{doc.name}}</td>
            <td style="border: 1px solid black;width: 100px;text-align: center;">{{doc.version}}</td>
            <td style="border: 1px solid black;width: 100px;text-align: center;">{{doc.owner}}</td>
            <td style="border: 1px solid black;padding: 10px;">
                {% if doc.status == "DRAFT" %}

                    {#make final button#}
                    <form action="/docflow/change_document_status_to_final/" method="post">
                     {% csrf_token %}
            {{ form.as_p }}
                        <input type="hidden" name="path" value={{ doc.path }}>
                        <button style="font-family: 'Open Sans', sans-serif;color: white;font-size: 18px;float: left;margin-right: 15px;border: 1px solid #ccc;background-color: #619fda;-webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;">Make final</button>
                    </form>

                    {#delete button#}
{#                    <button class = "delete" data-path={{ doc.path }} value={{ doc.path }} onClick='deleteDraft("{{ doc.path }}")' style="float: left; margin-right: 15px;font-family: 'Open Sans', sans-serif;color: white;font-size: 18px;float: left;margin-right: 15px;border: 1px solid #ccc;background-color: #619fda;-webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;">Delete</button>#}
                <form action="/docflow/delete_draft/" method="POST">
                            {% csrf_token %}
                        {{ form.as_p }}
                        <input type="hidden" name="path" value={{ doc.path }}>
                        <button style="font-family: 'Open Sans', sans-serif;color: white;font-size: 18px;float: left;margin-right: 15px;border: 1px solid #ccc;background-color: #619fda;-webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;">Delete</button>
                    </form>
                {% endif %}

                {% if doc.status == "FINAL" %}
                    {#make draft button#}
                    <form action="/docflow/change_document_status_to_draft/" method="post">
                     {% csrf_token %}
            {{ form.as_p }}
                        <input type="hidden" name="path" value={{ doc.path }}>
                        <button style="font-family: 'Open Sans', sans-serif;color: white;font-size: 18px;float: left;margin-right: 15px;border: 1px solid #ccc;background-color: #619fda;-webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;">Make draft</button>
                    </form>

                {% endif %}

                    {#download button#}
                    <form action="/docflow/download" method="get">
                        <input type="hidden" name="path" value={{ doc.path }}>
                        <input type="hidden" name="doc_name" value={{ doc.name }}>
                        <button type="submit" style="font-family: 'Open Sans', sans-serif;color: white;font-size: 18px;float: left;margin-right: 15px;border: 1px solid #ccc;background-color: #619fda;-webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;">Download</button>
                    </form>

                    {#edit metadata button#}
                    <form action="/docflow/editMetadata/" method="get">
                        <input type="hidden" name="document_id" value={{ doc.id }}>
                        <button style="font-family: 'Open Sans', sans-serif;color: white;font-size: 18px;float: left;margin-right: 15px;border: 1px solid #ccc;background-color: #619fda;-webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px;">Edit Metadata</button>
                    </form>

            </td>

          </tr>
        </table>


  {% endfor %}
{% endblock %}


